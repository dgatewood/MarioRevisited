<html> 
<head>
  <style>
   *{padding: 0; margin:0;}
   canvas{ background: #eee; display: block; margin: 0 auto;}
   </style>
</head>
<body>
<canvas id= "myCanvas" width="600" height="600"></canvas>
<script type="text/javascript">
let canvas = document.getElementById("myCanvas");
let ctx = canvas.getContext("2d");
document.addEventListener("keydown",keyDownHandler, false);
document.addEventListener("keyup",keyUpHandler,false);
let hasStartedGame = false;
let rightPressed = false;
let leftPressed = false;
let jumping = false;
let fps = 60;
let worldItems = new Image();
worldItems.src = "misc-3.gif";
let worldItems2 = new Image();
worldItems2.src = "misc-3-mirror.gif";
let worldItems3 = new Image();
worldItems3.src = "items-objects.png";
let enemies = new Image();
enemies.src = "enemies.png";

let backgroundMusic = new Audio();
backgroundMusic.src = "./media/smb_over.wav";
backgroundMusic.loop = true;


let marioX = 400;
let marioY = 30;
let marioIsDead = false;
let marioNeedsBounce = false;
let maxMarioHeight = 0;
let isFalling = false;
let lastButtonPressed = "right";
let isBig = false;
let canFire = false;
let canFireFireball = false;
let canFireCounter = 0;
let isCrouching = false;
///let hasHitMonster = false;
let blocks1 = [];

let gameObjects = [];
let projectiles = [];
let backgroundGameObjects = [];
let marioLives = 3;

function GameObject()
{
	this.x = 0;
	this.y = 0;
	this.isBrick = false;
	this.isQuestionBrick = false;
	this.hasBeenHit = false;
	this.isSolid = true;
	this.containsCoins = false;
	this.containsMushroom = false;
	this.isMushroom = false;
	this.contains1Up = false;
	this.is1Up = false;
	this.containsFlower = false;
	this.isFlower = false;
	this.needsBounce = false;
	this.ignoreEnemies = false;
	this.isFireball = false;
	this.frame = 0;
	this.counter = 0;
	this.speed = 0;
	this.verticalSpeed = 0;
	this.originalX = 0;
	this.originalY = 0;
	this.coinCounter = 0;
	this.isCoin = false;
	this.timerActive = false;
	this.timer = 0;
	this.isEnemy = false;
	this.hasBeenKilled = false;
	this.enemyType = 1;
	this.type = 0;
	this.leavesShell = false;
}

let gameObject = new GameObject();
gameObject.x = 20*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.originalX = 480;
gameObject.originalY = 375;
gameObject.isBrick = true;
gameObject.containsCoins = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 22*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.originalX = 480;
gameObject.originalY = 375;
gameObject.isBrick = true;
gameObject.containsCoins = true;
//gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 24*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.originalX = 480;
gameObject.originalY = 375;
gameObject.isBrick = true;
gameObject.containsCoins = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 16*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.originalX = 496;
gameObject.originalY = 375;
gameObject.isQuestionBrick = true;
gameObject.containsMushroom = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 21*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.originalX = 496;
gameObject.originalY = 375;
gameObject.isQuestionBrick = true;
gameObject.contains1Up = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 22*37.5;
gameObject.y = 225;
gameObject.speed = 1;
gameObject.originalX = 496;
gameObject.originalY = 375;
gameObject.isQuestionBrick = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 23*37.5;
gameObject.y = 375;
gameObject.speed = 1;
gameObject.isQuestionBrick = true;
gameObject.containsFlower = true;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 480;
gameObject.y = 416;
gameObject.speed = 2;
gameObject.isEnemy = true;
gameObject.hasBeenKilled = false;
gameObject.isFacingRight = true;
gameObject.enemyType = 1;
gameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 0;
gameObject.y = 445;
gameObject.type = 0;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 9*37.5;
gameObject.y = 100;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 20*37.5;
gameObject.y = 70;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 28*37.5;
gameObject.y = 70;
gameObject.type = 3;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 37*37.5;
gameObject.y = 100;
gameObject.type = 2;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 56*37.5;
gameObject.y = 100;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 66*37.5;
gameObject.y = 70;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 73*37.5;
gameObject.y = 100;
gameObject.type = 3;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 82*37.5;
gameObject.y = 70;
gameObject.type = 2;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 102*37.5;
gameObject.y = 70;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 112*37.5;
gameObject.y = 70;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 121*37.5;
gameObject.y = 100;
gameObject.type = 3;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 129*37.5;
gameObject.y = 70;
gameObject.type = 2;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 148*37.5;
gameObject.y = 100;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 158*37.5;
gameObject.y = 70;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 166*37.5;
gameObject.y = 100;
gameObject.type = 3;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 175*37.5;
gameObject.y = 70;
gameObject.type = 2;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

gameObject = new GameObject();
gameObject.x = 195*37.5;
gameObject.y = 100;
gameObject.type = 1;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

///small hill
gameObject = new GameObject();
gameObject.x = 16*37.5;
gameObject.y = 483;
gameObject.type = 4;
gameObject.isSolid = false;
backgroundGameObjects.push(gameObject);

///225 columns * 16 rows
//70-71 are the first gap...88-90 second gap....155-156 third
let currentBlock = 0;
let currentAnimation  = 0;
let animationCounter = 0;
let speed = 0;
let level1_1 = [
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2,-1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,-1,-1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3,-1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
[ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]];


function keyDownHandler(e){
    if(e.keyCode == 37)
    {
	   leftPressed = true;
	   lastButtonPressed = "left";
	}
	else if(e.keyCode == 39)
	{
	   rightPressed = true;
	   lastButtonPressed = "right";
	}
	
	
	if(e.keyCode == 38 && isOnSolidGround(marioX, marioY , true, false, false))
	{
		if(!jumping)
	   {
			maxMarioHeight = marioY - 270;
		}
	   jumping = true;
	   if(isBig)
	   {
			playSound("./media/smb_jump-super.wav");
	   }
	   else{
			playSound("./media/smb_jump-small.wav");
	   }
	}
	
	if(e.keyCode == 13 && !hasStartedGame)
	{
		hasStartedGame = true;
		backgroundMusic.play();
	}
	
	if(e.keyCode == 66 && canFireFireball)
	{
		canFireFireball = false;
		canFireCounter = 0;
	    gameObject = new GameObject();
		gameObject.x = marioX + 16;
		gameObject.y = marioY + 16;
		if(lastButtonPressed == "right")
		{
			gameObject.speed = 8;
		}
		else
		{
			gameObject.speed = -8;
		}
		gameObject.verticalSpeed = 4;
		gameObject.isFireball = true;
		projectiles.push(gameObject);
		playSound("./media/smb_fireball.wav");
	}
	
}

function keyUpHandler(e){
    if(e.keyCode == 37)
	{
	   leftPressed = false;
	}
	else if(e.keyCode == 39)
	{
	   rightPressed = false;
	}
	
	if(e.keyCode == 38)
	{
	   jumping = false;
	   isFalling = true;
	}
	
}


function playSound(source)
{
	let sound = new Audio();
	sound.src = source;
	sound.play();
}

function Point(x, y)
{
	this.col = y;
	this.row = x;
}

function isObjectAbove(x, y, isBig)
{
	let col = Math.floor(x /37.5);
	let row = Math.floor(y /37.5);
	
	blocks1 = [];
	
	for(let i = 0 ; i <= row; i++)
	{
		for(let j = 0; j < level1_1[i].length; j++)
			{
				if(level1_1[i][j] == 1)
				{
					blocks1.push(new Point(i, j));
				}
			}
	}		
	
	for(let i = 0; i < blocks1.length; i++)
	{
		if (x <= blocks1[i].col*35 + 37.5 &&
		   x + 35 >= blocks1[i].col*37.5 &&
		   y <= blocks1[i].row*37.5 + 37.5 &&
		   y + 37.5 >= blocks1[i].row*37.5 ) {
				console.log("there was a collision and the index was i " + i);
				return true;
			}
	}
	
	for(let i = 0; i < gameObjects.length; i++)
	{
		if (x +5<= gameObjects[i].x + 37.5&&
		   x + 32 >= gameObjects[i].x &&
		   y <= gameObjects[i].y + 37.5 &&
		   y + 37.5 >= gameObjects[i].y ) {
				//console.log("there was a collision and the index was i " + i);
				let enemyRow = Math.floor(gameObjects[i].y /37.5);
				if(row >= enemyRow)
				{
					if(gameObjects[i].isBrick && 
					!gameObjects[i].containsCoins)
					{	
						if(!isBig)
						{
							gameObjects[i].needsBounce = true;
						}
					}
					else if(gameObjects[i].isBrick && 
					gameObjects[i].containsCoins)
					{	
						
						if(!isBig)
						{
							console.log("timer is: " +gameObjects[i].timer);
							gameObjects[i].needsBounce = true;
							gameObjects[i].timerActive = true;
							if(gameObjects[i].timer < 300)
							{
								gO = new GameObject();
								gO.x = gameObjects[i].x;
								gO.y = gameObjects[i].y;
								gO.frame = 0;
								gO.counter = 0;
								gO.speed = 1;
								gO.isCoin = true;
								gameObjects.push(gO);
								playSound("./media/smb_coin.wav");
							}
						}
					}
					else if(gameObjects[i].isQuestionBrick &&
					gameObjects[i].needsBounce == false)
					{	
						gameObjects[i].needsBounce = true;
						if(!gameObjects[i].hasBeenHit)
						{
							if(gameObjects[i].containsCoins)
							{
							gO = new GameObject();
							gO.x = gameObjects[i].x;
							gO.y = gameObjects[i].y;
							gO.frame = 0;
							gO.counter = 0;
							gO.speed = 1;
							gO.isCoin = true;
							gameObjects.push(gO);
							playSound("./media/smb_coin.wav");
							}
							if(gameObjects[i].containsMushroom)
							{
							gO = new GameObject();
							gO.x = gameObjects[i].x;
							gO.y = gameObjects[i].y;
							gO.frame = 0;
							gO.counter = 0;
							gO.speed = 4;
							gO.isMushroom = true;
							gO.ignoreEnemies = true;
							gameObjects.push(gO);
							playSound("./media/smb_powerup_appears.wav");
							}
							if(gameObjects[i].contains1Up)
							{
							gO = new GameObject();
							gO.x = gameObjects[i].x;
							gO.y = gameObjects[i].y;
							gO.frame = 0;
							gO.counter = 0;
							gO.speed = 4;
							gO.is1Up = true;
							gO.ignoreEnemies = true;
							gameObjects.push(gO);
							playSound("./media/smb_powerup_appears.wav");
							}	
							if(gameObjects[i].containsFlower)
							{
							gO = new GameObject();
							gO.x = gameObjects[i].x;
							gO.y = gameObjects[i].y;
							gO.frame = 0;
							gO.counter = 0;
							gO.speed = 4;
							gO.isFlower = true;
							gO.ignoreEnemies = true;
							gameObjects.push(gO);
							playSound("./media/smb_powerup_appears.wav");
							}								
						}
					}
					
					
					
				}
				if(row >= enemyRow)
				{
					return true;
				}
			}
	}
	
	return false;
}

function isOnSolidGround(x, y, isMario, ignoresEnemies, isFireball, fireIndex = -1)
{
	let col = Math.floor(x /37.5);
	let row = Math.floor(y /37.5);
	if(row < 0)
	{
		return false;
	}
	
	blocks1 = [];
	
	for(let i = row +1; i < level1_1.length; i++)
	{
		for(let j = 0; j < level1_1[i].length; j++)
			{
				if(level1_1[i][j] == 1)
				{
					blocks1.push(new Point(i, j));
				}
			}
	}		
	if(isMario && isBig)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			for(let i = 0; i < blocks1.length; i++)
		{
			if (x + 5<= Math.floor(blocks1[i].col*37.5 + 37.5) &&
			   x + 34 >= Math.floor(blocks1[i].col*37.5) &&
			   y <= Math.floor(blocks1[i].row*37.5 + 37.5) &&
			   y + 75 >= Math.floor(blocks1[i].row*37.5 )) {
					//console.log("there was a collision and the index was i " + i);
					return true;
				}
		}
		}
		
		
		for(let i = 0; i < gameObjects.length; i++)
		{
			if (x + 5 <= gameObjects[i].x + 37.5&&
			   x + 34 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37.5 &&
			   y + 75 >= gameObjects[i].y ) {
					//console.log("there was a collision and the index was i " + i);
					let enemyRow = Math.floor(gameObjects[i].y /37.5);
					if(enemyRow >= row)
					{
						if(gameObjects[i].isEnemy && 
						!gameObjects[i].leavesShell && isMario)
						{
							gameObjects[i].hasBeenKilled = true;
							gameObjects[i].frame = 0;
							gameObjects[i].counter = 0;
							marioNeedsBounce = true;
							animationCounter = 0;
							currentAnimation = 0;
							playSound("./media/smb_stomp.wav");
						}
						if(ignoresEnemies)
						{
							return false;
						}
						else
						{
							return true;
						}
					}
				}
		}
	}
	else if(isMario)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x + 5<= Math.floor(blocks1[i].col*37.5 + 37.5) &&
			   x + 34 >= Math.floor(blocks1[i].col*37.5) &&
			   y <= Math.floor(blocks1[i].row*37.5 + 37.5) &&
			   y + 37 >= Math.floor(blocks1[i].row*37.5 )) {
					//console.log("there was a collision and the index was i " + i);
					return true;
				}
		}
		
		
		for(let i = 0; i < gameObjects.length; i++)
		{
			if (x + 5 <= gameObjects[i].x + 37&&
			   x + 34 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37 &&
			   y + 37 >= gameObjects[i].y ) {
					//console.log("there was a collision and the index was i " + i);
					let enemyRow = Math.floor(gameObjects[i].y /37.5);
					if(enemyRow >= row + 1)
					{
						if(gameObjects[i].isEnemy && 
						!gameObjects[i].leavesShell && isMario)
						{
							gameObjects[i].hasBeenKilled = true;
							gameObjects[i].frame = 0;
							gameObjects[i].counter = 0;
							marioNeedsBounce = true;
							animationCounter = 0;
							currentAnimation = 0;
						}
						if(gameObjects[i].isMushroom)
						{
							gameObjects.splice(i, 1);
							isBig = true;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i].is1Up)
						{
							gameObjects.splice(i, 1);
							marioLives += 1;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i].isFlower)
						{
							gameObjects.splice(i, 1);
							isBig = true;
							canFire = true;
							playSound("./media/smb_powerup.wav");
						}
						
						if(ignoresEnemies)
						{
							return false;
						}
						else
						{
							return true;
						}
					}
				}
		}
	}
	if(isFireball)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			
			if (x + 5<= Math.floor(blocks1[i].col*37.5 + 37.5) &&
			   x + 8 >= Math.floor(blocks1[i].col*37.5) &&
			   y <= Math.floor(blocks1[i].row*37.5 + 37.5) &&
			   y + 37/2 >= Math.floor(blocks1[i].row*37.5 )) {
					//console.log("there was a collision and the index was i " + i);
					return true;
				}
		}
		
		
		for(let i = 0; i < gameObjects.length; i++)
		{
			if (x <= gameObjects[i].x + 36&&
			   x + 37.5/2 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37 &&
			   y + 37.5/2 >= gameObjects[i].y ) {
					//console.log("there was a collision and the index was i " + i);
					let enemyRow = Math.floor(gameObjects[i].y /37.5);
					if(enemyRow >= row + 1)
					{
						if(gameObjects[i].isEnemy)
						{
							gameObjects[i].hasBeenKilled = true;
							if(fireIndex > -1)
							{
								projectiles.splice(fireIndex, 1);
							}
						}
						else
						{
							return true;
						}
					}
				}
		}
	}
	else
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x + 5<= Math.floor(blocks1[i].col*37.5 + 37.5) &&
			   x + 34 >= Math.floor(blocks1[i].col*37.5) &&
			   y <= Math.floor(blocks1[i].row*37.5 + 37.5) &&
			   y + 37 >= Math.floor(blocks1[i].row*37.5 )) {
					//console.log("there was a collision and the index was i " + i);
					return true;
				}
		}
		
		
		for(let i = 0; i < gameObjects.length; i++)
		{
			if (x <= gameObjects[i].x + 36&&
			   x + 36 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37 &&
			   y + 37 >= gameObjects[i].y ) {
					//console.log("there was a collision and the index was i " + i);
					let enemyRow = Math.floor(gameObjects[i].y /37.5);
					if(enemyRow >= row + 1)
					{
						if(gameObjects[i].isEnemy && 
						!gameObjects[i].leavesShell && isMario)
						{
							gameObjects[i].hasBeenKilled = true;
							gameObjects[i].frame = 0;
							gameObjects[i].counter = 0;
							marioNeedsBounce = true;
							animationCounter = 0;
							currentAnimation = 0;
						}
						if(ignoresEnemies)
						{
							return false;
						}
						else
						{
							return true;
						}
					}
				}
		}
	}
	
		
	return false;
}

function isBlockedInX(x, y, isMario, ignoresEnemies, isFireball, fireIndex = -1)
{
	
	
	let col = Math.floor(x /37.5);
	let row = Math.floor(y /37.5);
	
	
	blocks1 = [];
	
	if(isMario && isBig)
	{
		row = Math.floor(y /37.5) + 1;
			
		for(let i = 0; i <= row; i++)
		{
			for(let j = 0; j < level1_1[i].length; j++)
				{
					if(level1_1[i][j] == 1)
					{
						blocks1.push(new Point(i, j));
					}
				}
		}	

	}
	else
	{
		for(let i = 0; i <= row; i++)
		{
			for(let j = 0; j < level1_1[i].length; j++)
				{
					if(level1_1[i][j] == 1)
					{
						blocks1.push(new Point(i, j));
					}
				}
		}
	}
	
	if(isFireball)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x <= blocks1[i].col*37.5 + 37.5 &&
			   x + 37.5/2 >= blocks1[i].col*37.5 &&
			   y <= blocks1[i].row*37.5 + 37.5 &&
			   y + 37.5/2 >= blocks1[i].row*37.5 ) {
					//console.log("there was a collision and the index was i " + i);
					
					if(fireIndex > -1)
					{
						projectiles.splice(fireIndex, 1);
					}
				}
		}
	
		for(let i = 0; i < gameObjects.length; i++)
		{
			let objectRow = Math.floor(gameObjects[i].y /37.5);
			if (x <= gameObjects[i].x + 37.5&&
			   x + 37.5/2 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37.5 &&
			   y + 37.5/2 >= gameObjects[i].y) {
						if(gameObjects[i].isEnemy)
							{
								gameObjects[i].hasBeenKilled = true;
								if(fireIndex > -1)
								{
									projectiles.splice(fireIndex, 1);
								}
							}
				}
		}
	}
	
	
	if(isMario && isBig)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x <= blocks1[i].col*37.5 + 37.5 &&
			   x + 37.5 >= blocks1[i].col*37.5 &&
			   y <= blocks1[i].row*37.5 + 37.5 &&
			   y + 75 >= blocks1[i].row*37.5 ) {
					//console.log("there was a collision and the index was i " + i);
					
					return true;
				}
		}
	
		for(let i = 0; i < gameObjects.length; i++)
		{
			let objectRow = Math.floor(gameObjects[i].y /37.5);
			if (x + 10<= gameObjects[i].x + 37.5&&
			   x + 15 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37.5 &&
			   y + 75 >= gameObjects[i].y) {
						if(isMario && gameObjects[i].isEnemy)
							{
								marioIsDead = true;
								counter = 0;
								frame = 0;
								playSound("./media/smb_mariodie.wav");
							}
						if(gameObjects[i] != null && gameObjects[i].isMushroom)
						{
							gameObjects.splice(i, 1);
							isBig = true;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i] != null && gameObjects[i].is1Up)
						{
							gameObjects.splice(i, 1);
							marioLives += 1;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i] != null && gameObjects[i].isFlower)
						{
							gameObjects.splice(i, 1);
							isBig = true;
							canFire = true;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i] != null && !gameObjects[i].x == x)
						{
							if(ignoreEnemies == true && gameObjects[i].isEnemy)
							{
								return false;
							}
							else
							{
								return true;
							}
						}
				}
		}
	}
	else if(isMario)
	{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x <= blocks1[i].col*37.5 + 37.5 &&
			   x + 37.5 >= blocks1[i].col*37.5 &&
			   y <= blocks1[i].row*37.5 + 37.5 &&
			   y + 37.5 >= blocks1[i].row*37.5 ) {
					//console.log("there was a collision and the index was i " + i);
					
					return true;
				}
		}
		
		for(let i = 0; i < gameObjects.length; i++)
		{
			let objectRow = Math.floor(gameObjects[i].y /37.5);
			if (x + 10<= gameObjects[i].x + 37.5&&
			   x + 15 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37.5 &&
			   y + 75 >= gameObjects[i].y) {
						if(isMario && gameObjects[i].isEnemy)
							{
								marioIsDead = true;
								counter = 0;
								frame = 0;
								playSound("./media/smb_mariodie.wav");
							}
						if(gameObjects[i] != null && gameObjects[i].isMushroom)
						{
							gameObjects.splice(i, 1);
							marioY -= 38;
							isBig = true;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i] != null && gameObjects[i].is1Up)
						{
							gameObjects.splice(i, 1);
							marioLives += 1;
							playSound("./media/smb_powerup.wav");
						}
						
						if(gameObjects[i] != null && gameObjects[i].isFlower)
						{
							gameObjects.splice(i, 1);
							marioY -= 38;
							isBig = true;
							canFire = true;
							playSound("./media/smb_powerup.wav");
						}
						if(gameObjects[i] != null && !gameObjects[i].x == x)
						{
							if(ignoreEnemies == true && gameObjects[i].isEnemy)
							{
								return false;
							}
							else
							{
								return true;
							}
						}
				}
		}
	}
	else{
		for(let i = 0; i < blocks1.length; i++)
		{
			if (x <= blocks1[i].col*37.5 + 37.5 &&
			   x + 37.5 >= blocks1[i].col*37.5 &&
			   y <= blocks1[i].row*37.5 + 37.5 &&
			   y + 37.5 >= blocks1[i].row*37.5 ) {
					//console.log("there was a collision and the index was i " + i);
					
					return true;
				}
		}
	
	
		for(let i = 0; i < gameObjects.length; i++)
		{
			let objectRow = Math.floor(gameObjects[i].y /37.5);
			if (x + 10<= gameObjects[i].x + 37.5&&
			   x + 15 >= gameObjects[i].x &&
			   y <= gameObjects[i].y + 37.5 &&
			   y + 37.5 >= gameObjects[i].y) {
					
					
						
						if( !gameObjects[i].x == x ||
						!gameObjects[i].x == x)
						{
							if(ignoreEnemies == true && 
							gameObjects[i].isEnemy)
							{
								return false;
							}
							else
							{
								return true;
							}
						}
				}
		}
	}
	
		

	
	return false;
}

function drawGameObjects()
{
	for(let i = 0; i < gameObjects.length; i++)
		{
			if(gameObjects[i].isBrick == true)
			{
				if(gameObjects[i].timerActive)
				{
					gameObjects[i].timer += 1;
				}
				if(gameObjects[i].needsBounce)
				{
					if(gameObjects[i].frame < 8)
					{
						gameObjects[i].y -= 5;
					}
					else
					{
						gameObjects[i].y += 5;
					}
					gameObjects[i].frame++;
					if(gameObjects[i].frame >= 16)
					{
						gameObjects[i].needsBounce = false;
						gameObjects[i].frame = 0;
					}
				}
				ctx.drawImage(worldItems, 373, 102, 16, 16, 
				gameObjects[i].x - marioX + 300, 
				gameObjects[i].y, 37.5, 37.5);
				
			}

			
			
			
			if(gameObjects[i].isQuestionBrick == true)
			{
				if(gameObjects[i].needsBounce && 
				!gameObjects[i].hasBeenHit)
				{
					if(gameObjects[i].frame < 8)
					{
						gameObjects[i].y -= 5;
					}
					else
					{
						gameObjects[i].y += 5;
					}
					gameObjects[i].frame++;
					if(gameObjects[i].frame >= 16)
					{
						gameObjects[i].hasBeenHit = true;
						gameObjects[i].needsBounce = false;
						gameObjects[i].frame = 0;
					}
				}
				if(!gameObjects[i].hasBeenHit)
				{
					ctx.drawImage(worldItems3, 0, 64, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else
				{
					ctx.drawImage(worldItems, 373, 65, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				
			}	
			
			if(gameObjects[i].isCoin == true)
			{
				if(gameObjects[i].frame < 16)
					{
						gameObjects[i].y -= 5;
					}
					
					gameObjects[i].frame++;
					if(gameObjects[i].frame >= 16)
					{
						gameObjects.splice(i,1);
						break;
					}
				if(gameObjects[i].frame > 14)
				{
					ctx.drawImage(worldItems3, 16, 97, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 12)
				{
					ctx.drawImage(worldItems3, 16, 82, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 10)
				{
					ctx.drawImage(worldItems3, 0, 97, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 8)
				{
					ctx.drawImage(worldItems3, 0, 82, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 6)
				{
					ctx.drawImage(worldItems3, 16, 97, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 4)
				{
					ctx.drawImage(worldItems3, 16, 82, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].frame > 2)
				{
					ctx.drawImage(worldItems3, 0, 97, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
				else
				{
					ctx.drawImage(worldItems3, 0, 82, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
				}
			}	
			
			if(gameObjects[i].isMushroom == true ||
				gameObjects[i].is1Up == true)
			{
				if(gameObjects[i].frame < 10)
					{
						gameObjects[i].y -= 13;
					}
					
					gameObjects[i].frame++;
				if(gameObjects[i].frame >=10)
				{
					gameObjects[i].x += gameObjects[i].speed;
				}
				
				if(isBlockedInX(gameObjects[i].x + 4, 
				gameObjects[i].y, false, true, false))
				{
					gameObjects[i].speed *= -1;
				}
				
				if(!isOnSolidGround(gameObjects[i].x, 
				gameObjects[i].y, false, true, false))
					{
						gameObjects[i].y += 6;
					}
				if(gameObjects[i].isMushroom == true)
				{
					ctx.drawImage(worldItems, 71, 43, 16, 16, 
						gameObjects[i].x - marioX + 300, 
						gameObjects[i].y, 37.5, 37.5);
				}
				else if(gameObjects[i].is1Up == true)
				{
					ctx.drawImage(worldItems, 52, 43, 16, 16, 
						gameObjects[i].x - marioX + 300, 
						gameObjects[i].y, 37.5, 37.5);
				}
					
			}
			
			if(gameObjects[i].isFlower)
			{
				if(gameObjects[i].frame < 18)
					{
						gameObjects[i].y -= 2;
						gameObjects[i].frame++;
					}
					
				ctx.drawImage(worldItems, 52, 64, 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);				
			}
			
			
			if(gameObjects[i].isEnemy == true)
			{
				gameObjects[i].counter++;
				if(!gameObjects[i].hasBeenKilled)
				{
					if(gameObjects[i].counter >= 8)
					{
						gameObjects[i].frame++;
						gameObjects[i].counter = 0;
						if(gameObjects[i].frame >= 2)
						{
							gameObjects[i].frame = 0;
						}
					}
					if(gameObjects[i].isFacingRight)
					{
						gameObjects[i].x += gameObjects[i].speed;
						if(isBlockedInX(gameObjects[i].x, 
						gameObjects[i].y, false, false, false))
						{
							gameObjects[i].isFacingRight = !gameObjects[i].isFacingRight;
						}
					}
					else
					{
						gameObjects[i].x -= gameObjects[i].speed;
						if(isBlockedInX(gameObjects[i].x, 
						gameObjects[i].y, false, false, false))
						{
							gameObjects[i].isFacingRight = !gameObjects[i].isFacingRight;
						}
					}
					
					if(!isOnSolidGround(gameObjects[i].x, 
					gameObjects[i].y, false, false, false))
					{
						gameObjects[i].y += 6;
					}
						
					if(gameObjects[i].frame == 0 &&
					!gameObjects[i].hasBeenKilled)
					{
						ctx.drawImage(enemies, 0, 4, 16, 16, 
						gameObjects[i].x - marioX + 300, 
						gameObjects[i].y, 37.5, 37.5);
					}
					else if(gameObjects[i].frame == 1 &&
					!gameObjects[i].hasBeenKilled)
					{
						ctx.drawImage(enemies, 30, 4, 16, 16, 
						gameObjects[i].x - marioX + 300, 
						gameObjects[i].y, 37.5, 37.5);
					}
				}
				
				
				if(gameObjects[i].hasBeenKilled)
				{
					gameObjects[i].counter++;
					ctx.drawImage(enemies, 60,0 , 16, 16, 
					gameObjects[i].x - marioX + 300, 
					gameObjects[i].y, 37.5, 37.5);
					if(gameObjects[i].counter > 4)
					{
						gameObjects.splice(i,1);
					}
				}
			}
	}
}

function printMap(level)
{
	for(let i = 0; i < level.length; i++)
		{
			for(let j = Math.floor((marioX - 300) /37.5); j < Math.floor(marioX/37.5) + 17; j++)
			{
				if(level[i][j] == 0)
				{
					ctx.drawImage(worldItems, 275, 332, 16, 16, (j*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
				}
			}
		}
		
	drawBackground();
	
	for(let i = 0; i < level.length; i++)
		{
			for(let j = Math.floor((marioX - 300) /37.5); j < Math.floor(marioX/37.5) + 17; j++)
			{
				if(level[i][j] == 1)
				{
					ctx.drawImage(worldItems, 373, 124, 16, 16, (j*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
				}
				///pipe starts at 614/46 and has w/h of 16*16
				///extension 614/82
				///top of pipe
				if(level[i][j] == 2)
				{
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					(j*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					(j*37.5) - marioX + 300, ((i+1)*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					((j+1)*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					((j+1)*37.5) - marioX + 300, ((i+1)*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 614, 46, 32, 32, 
					(j*37.5) - marioX + 300, (i*37.5) +4, 75, 75);
				}
				//extension
				if(level[i][j] == 3)
				{
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					(j*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 275, 332, 16, 16, 
					((j+1)*37.5) - marioX + 300, (i*37.5), 37.5, 37.5);
					ctx.drawImage(worldItems, 614, 83, 32, 16, 
					(j*37.5) - marioX + 300, (i*37.5) +2, 75, 37.5);
				}
				
			}
		}
	
}


function controls()
{
	
	if(rightPressed && isFalling)
	{
		if(!isBlockedInX(marioX + 10 , marioY+10, true, false, false))
		{
			marioX += speed;
			
		}
	}
	else if(leftPressed && isFalling)
	{
		if(!isBlockedInX(marioX - 10, marioY+10, true, false, false))
		{
			marioX -= speed;
		}
	}
	else if(rightPressed)
	{
		if(!isBlockedInX(marioX + 4 , marioY, true, false, false))
		{
			marioX += speed;
		}
	}
	else if(leftPressed)
	{
		if(!isBlockedInX(marioX - 4, marioY, true, false, false))
		{
			marioX -= speed;
		}
	}

	if(jumping)
	{
		
		marioY -= 20;
		
		if(marioY <= maxMarioHeight)
		{
			isFalling = true;
			jumping = false;
		}
		
		if(isObjectAbove(marioX, marioY))
		{
			jumping = false;
			isFalling = true;
		}

		}
	
	

	if(isFalling)
	{
		if(isOnSolidGround(marioX, marioY , true, false, false))
		{
			isFalling = false;
		}
		
	}
	
	if(!isOnSolidGround(marioX, marioY + 2, true, false, false))
	{
		
		marioY += 10;
	}
	
	
	isBlockedInX(marioX , marioY, true, false, false);
}

function drawMario()
{
	animationCounter++;
	let relativeX = 0;
	if(marioX >= 300)
	{
		relativeX = 300;
	}
	else
	{
		relativeX = marioX;
	}
	if(!isBig)
	{
		if(marioNeedsBounce)
		{
			if(animationCounter >= 3)
				{
					currentAnimation++;
					animationCounter = 0;
				}
			if(currentAnimation < 2)
			{
				marioY -= 20;
			}
			else
			{
				currentAnimation = 0;
				animationCounter = 0;
				marioNeedsBounce = false;
			}
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 139, 507, 16, 16, relativeX, marioY, 37.5, 37.5);
				}
				if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 524, 507, 16, 16, relativeX, marioY, 37.5, 37.5);
				}
		}
		
		else if(marioIsDead)
		{
			if(animationCounter >= 3)
				{
					frame++;
					animationCounter = 0;
				}
			if(frame < 10)
			{
				marioY -= 10;
			}
			else
			{
				marioY += 10;
			}
			ctx.drawImage(worldItems, 45, 509, 16, 16, 
			relativeX, marioY, 37.5, 37.5);	
		}
		else
		{
		if(rightPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems, 84, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				else if(currentAnimation == 1)
				{
					ctx.drawImage(worldItems, 100, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems, 116, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems, 139, 507, 16, 16, 
				relativeX, marioY, 37.5, 37.5);
				}
			
		}
		else if(leftPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems2, 582, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				else if(currentAnimation == 1)
				{
					ctx.drawImage(worldItems2, 565, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems2, 546 , 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems2, 524, 507, 16, 16, 
				relativeX, marioY, 37.5, 37.5);	
			}
		}
		else if(jumping || isFalling)
			{
					if(lastButtonPressed == "right")
					{
						ctx.drawImage(worldItems, 139, 507, 16, 16, 
						relativeX, marioY, 37.5, 37.5);
					}
					if(lastButtonPressed == "left")
					{
						ctx.drawImage(worldItems2, 524, 507, 16, 16, 
						relativeX, marioY, 37.5, 37.5);
					}
			}
	else
		{
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 22, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
			if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 643, 507, 16, 16, 
					relativeX, marioY, 37.5, 37.5);
				}
		}
		}
	}
	
	else if(canFire)
	{
		
		if(canFireCounter == 30 && canFireFireball == false)
		{
			canFireFireball = true;
		}
		else
		{
			canFireCounter += 1;
		}
		
		if(marioNeedsBounce)
		{
			if(animationCounter >= 3)
				{
					currentAnimation++;
					animationCounter = 0;
				}
			if(currentAnimation < 2)
			{
				marioY -= 20;
			}
			else
			{
				currentAnimation = 0;
				animationCounter = 0;
				marioNeedsBounce = false;
			}
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 238, 628, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
			if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 426, 628, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
		}
		
		else if(marioIsDead)
		{
			if(animationCounter >= 3)
				{
					frame++;
					animationCounter = 0;
				}
			if(frame < 10)
			{
				marioY -= 10;
			}
			else
			{
				marioY += 10;
			}
			ctx.drawImage(worldItems, 45, 509, 16, 16, 
			relativeX, marioY, 37.5, 37.5);	
		}
		else
		{
		if(rightPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems, 166, 631, 16, 34, 
					relativeX, marioY + 5, 37.5, 75);
				}
				else if(currentAnimation == 1)
				{
					
					
					ctx.drawImage(worldItems, 211, 631, 16, 34, 
					relativeX, marioY + 5, 37.5, 75);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems, 188, 631, 16, 34, 
					relativeX, marioY + 5, 37.5,75);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems, 238, 628, 16, 32, 
				relativeX, marioY + 5, 37.5, 75);
			}
			
		}
		else if(leftPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems2, 500, 631, 16, 34, 
					relativeX, marioY+5, 37.5, 75);
				}
				else if(currentAnimation == 1)
				{
					
					
					ctx.drawImage(worldItems2, 453 , 631, 16, 34, 
					relativeX, marioY+5, 37.5, 75);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems2, 478, 631, 16, 34, 
					relativeX, marioY+5, 37.5, 75);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems2, 426, 628, 16, 34, 
				relativeX, marioY +5, 37.5, 75);	
			}
		}
		else if(jumping || isFalling)
			{
					if(lastButtonPressed == "right")
					{
						ctx.drawImage(worldItems, 238, 628, 16, 32, 
						relativeX, marioY, 37.5, 75);
					}
					if(lastButtonPressed == "left")
					{
						ctx.drawImage(worldItems2, 426, 628, 16, 34,
						relativeX, marioY, 37.5, 75);
					}
			}
	else
		{
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 119, 630, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
			if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 545, 630, 16, 34, 
					relativeX, marioY, 37.5, 75);
				}
		}
		}
	}
	
	else
	{
		if(marioNeedsBounce)
		{
			if(animationCounter >= 3)
				{
					currentAnimation++;
					animationCounter = 0;
				}
			if(currentAnimation < 2)
			{
				marioY -= 20;
			}
			else
			{
				currentAnimation = 0;
				animationCounter = 0;
				marioNeedsBounce = false;
			}
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 48, 546, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
				if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 497, 546, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
		}
		
		else if(marioIsDead)
		{
			if(animationCounter >= 3)
				{
					frame++;
					animationCounter = 0;
				}
			if(frame < 10)
			{
				marioY -= 10;
			}
			else
			{
				marioY += 10;
			}
			ctx.drawImage(worldItems, 45, 509, 16, 16, 
			relativeX, marioY, 37.5, 37.5);	
		}
		else
		{
		if(rightPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems, 95, 547, 16, 34, 
					relativeX, marioY, 37.5, 75);
				}
				else if(currentAnimation == 1)
				{
					
					
					ctx.drawImage(worldItems, 140, 547, 16, 34, 
					relativeX, marioY, 37.5, 75);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems, 115, 547, 16, 34, 
					relativeX, marioY, 37.5,75);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems, 167, 548, 16, 32, 
				relativeX, marioY, 37.5, 75);
			}
			
		}
		else if(leftPressed)
		{
			speed = 4;
			if(isFalling == false && jumping == false)
			{
				if(currentAnimation == 0)
				{
					ctx.drawImage(worldItems2, 570, 547, 18, 34, 
					relativeX, marioY, 37.5, 75);
				}
				else if(currentAnimation == 1)
				{
					
					
					ctx.drawImage(worldItems2, 522 , 547, 18, 34, 
					relativeX, marioY, 37.5, 75);
				}
				else if(currentAnimation == 2)
				{
					ctx.drawImage(worldItems2, 547, 547, 18, 34, 
					relativeX, marioY, 37.5, 75);
				}
				if(animationCounter >= 4)
				{
					currentAnimation++;
					animationCounter = 0;
					if(currentAnimation > 2)
					{
						currentAnimation = 0;
					}
				}
			}
			else
			{
				ctx.drawImage(worldItems2, 497, 546, 18, 34, 
				relativeX, marioY, 37.5, 75);	
			}
		}
		else if(jumping || isFalling)
			{
					if(lastButtonPressed == "right")
					{
						ctx.drawImage(worldItems, 167, 546, 16, 34, 
						relativeX, marioY, 37.5, 75);
					}
					if(lastButtonPressed == "left")
					{
						ctx.drawImage(worldItems2, 497, 546, 16, 34, 
						relativeX, marioY, 37.5, 75);
					}
			}
	else
		{
			if(lastButtonPressed == "right")
				{
					ctx.drawImage(worldItems, 48, 545, 16, 32, 
					relativeX, marioY, 37.5, 75);
				}
			if(lastButtonPressed == "left")
				{
					ctx.drawImage(worldItems2, 615, 549, 18, 32, 
					relativeX, marioY, 37.5, 75);
				}
		}
		}
	}
}


function drawBackground()
{
	for(let i = 0; i < backgroundGameObjects.length; i++)
	{
		if(backgroundGameObjects[i].type == 0)
		{
			///large hill
			ctx.drawImage(worldItems, 99, 160, 80, 35, 
				backgroundGameObjects[i].x - marioX + 300, 
				backgroundGameObjects[i].y, 37.5 * (80/16), 
				37.5 * (35/16));
		}
		if(backgroundGameObjects[i].type == 1)
		{
			///single cloud
			ctx.drawImage(worldItems, 162, 198, 32, 24, 
				backgroundGameObjects[i].x - marioX + 300, 
				backgroundGameObjects[i].y, 37.5 * (32/16), 
				37.5 * (24/16));
		}
		if(backgroundGameObjects[i].type == 2)
		{
			///double cloud
			ctx.drawImage(worldItems, 46, 198, 48, 24, 
				backgroundGameObjects[i].x - marioX + 300, 
				backgroundGameObjects[i].y, 37.5 * (48/16), 
				37.5 * (24/16));
		}
		if(backgroundGameObjects[i].type == 3)
		{
			///triple cloud
			ctx.drawImage(worldItems, 96, 198, 64, 24, 
				backgroundGameObjects[i].x - marioX + 300, 
				backgroundGameObjects[i].y, 37.5 * (64/16), 
				37.5 * (24/16));
		}
		if(backgroundGameObjects[i].type == 4)
		{
			///small hill
			ctx.drawImage(worldItems, 48, 176, 48, 18, 
				backgroundGameObjects[i].x - marioX + 300, 
				backgroundGameObjects[i].y, 37.5 * (48/16), 
				37.5 * (18/16));
		}
	}
}

function drawProjectiles()
{
	for( let i = 0; i < projectiles.length; i++)
	{

		projectiles[i].y += projectiles[i].verticalSpeed;
		projectiles[i].x += projectiles[i].speed;
		projectiles[i].timer += 1;
		if(projectiles[i].timer % 3== 0)
		{
			projectiles[i].frame += 1;
		}
		if(projectiles[i].frame > 3)
		{
			projectiles[i].frame = 0;
		}
		
		if(projectiles[i].frame == 0)
		{
			ctx.drawImage(worldItems, 313, 945, 8, 8, 
				projectiles[i].x - marioX + 300, 
				projectiles[i].y, 37.5/2, 37.5/2);
		}
		else if(projectiles[i].frame == 1)
		{
			ctx.drawImage(worldItems, 324, 945, 8, 8, 
				projectiles[i].x - marioX + 300, 
				projectiles[i].y, 37.5/2, 37.5/2);
		}
		else if(projectiles[i].frame == 2)
		{
			ctx.drawImage(worldItems, 336, 945, 8, 8, 
				projectiles[i].x - marioX + 300, 
				projectiles[i].y, 37.5/2, 37.5/2);
		}
		else
		{
			ctx.drawImage(worldItems, 348, 945, 8, 8, 
				projectiles[i].x - marioX + 300, 
				projectiles[i].y, 37.5/2, 37.5/2);
		}

		if(isOnSolidGround(projectiles[i].x, projectiles[i].y + 4, 
			false, false, true, i))
		{
			console.log("is true.");
			projectiles[i].verticalSpeed *= -1;
			projectiles[i].originalY = projectiles[i].y - 40;
		}


		if(projectiles[i].originalY > projectiles[i].y)
		{
			projectiles[i].verticalSpeed *= -1;
		}
		
		isBlockedInX(projectiles[i].x , projectiles[i].y, false, false, true, i);
	}
}

function drawGameStart()
{
	ctx.fillStyle = "rgb(255,255,255)";
	ctx.font = "45px Arial";
	ctx.fillText("Click Enter to Start", 100, 300);
}

function draw () {
   setTimeout(function() {
   requestAnimationFrame(draw);
   ctx.fillStyle = "rgb(20,20,20)";
   ctx.fillRect(0,0,800,600);
   
   ///all code goes here
   if(!hasStartedGame)
   {
		drawGameStart();
   }
   else
   {
	   hasHitMonster = false;
	   printMap(level1_1, marioX);
	   
	   if(!marioIsDead)
	   {
			controls();
		}
	   drawGameObjects();
	   drawProjectiles();
	   drawMario();
   }

   },1000/fps);
}
draw();

</script>
</body>
</html>